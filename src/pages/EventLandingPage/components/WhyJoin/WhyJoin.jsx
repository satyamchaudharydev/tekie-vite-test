import React from "react";
import { get } from "lodash";
import getPath from "../../../../utils/getPath";
import "./style.scss";
import DescriptionsSkeleton from "../../pages/EventDescription/DescriptionsSkeletons";
import getIntlDateTime from "../../../../utils/time-zone-diff";
import moment from "moment";
import getSlotLabel from "../../../../utils/slots/slot-label";
import SimpleButtonLoader from "../../../../components/SimpleButtonLoader";

const renderCertificateIcon = () => (
  <svg
    className="WhyJoin_certificate-icon"
    viewBox="0 0 61 61"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M38.3086 31.8914C35.202 31.8914 32.6836 34.4098 32.6836 37.5164C32.6836 40.623 35.202 43.1414 38.3086 43.1414C41.4152 43.1414 43.9336 40.623 43.9336 37.5164C43.9336 34.4098 41.4152 31.8914 38.3086 31.8914ZM28.9336 37.5164C28.9336 32.3387 33.1309 28.1414 38.3086 28.1414C43.4863 28.1414 47.6836 32.3387 47.6836 37.5164C47.6836 42.694 43.4863 46.8914 38.3086 46.8914C33.1309 46.8914 28.9336 42.694 28.9336 37.5164Z"
      fill="white"
    />
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M33.3086 41.8914C34.3441 41.8914 35.1836 42.7308 35.1836 43.7664V51.2664L37.1836 49.7664C37.8503 49.2664 38.7669 49.2664 39.4336 49.7664L41.4336 51.2664V43.7664C41.4336 42.7308 42.2731 41.8914 43.3086 41.8914C44.3441 41.8914 45.1836 42.7308 45.1836 43.7664V55.0164C45.1836 55.7266 44.7823 56.3758 44.1471 56.6934C43.5119 57.011 42.7518 56.9425 42.1836 56.5164L38.3086 53.6101L34.4336 56.5164C33.8654 56.9425 33.1053 57.011 32.4701 56.6934C31.8348 56.3758 31.4336 55.7266 31.4336 55.0164V43.7664C31.4336 42.7308 32.2731 41.8914 33.3086 41.8914Z"
      fill="white"
    />
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M13.3086 14.3914C11.5941 14.3914 10.1836 15.8019 10.1836 17.5164V42.5164C10.1836 43.3452 10.5128 44.14 11.0989 44.7261C11.6849 45.3121 12.4798 45.6414 13.3086 45.6414H25.8086C26.8441 45.6414 27.6836 46.4808 27.6836 47.5164C27.6836 48.5519 26.8441 49.3914 25.8086 49.3914H13.3086C11.4852 49.3914 9.73655 48.667 8.44723 47.3777C7.15792 46.0884 6.43359 44.3397 6.43359 42.5164V17.5164C6.43359 13.7308 9.52306 10.6414 13.3086 10.6414H48.3086C50.132 10.6414 51.8806 11.3657 53.17 12.655C54.4593 13.9443 55.1836 15.693 55.1836 17.5164V42.5164C55.1824 43.722 54.8641 44.908 54.2608 45.9518C53.6574 46.9956 52.7902 47.8623 51.7461 48.4652C50.8493 48.9829 49.7026 48.6757 49.1848 47.7789C48.667 46.8821 48.9743 45.7353 49.8711 45.2176C50.3457 44.9436 50.7399 44.5496 51.0141 44.0751C51.2884 43.6007 51.433 43.0624 51.4336 42.5144V17.5164C51.4336 16.6876 51.1044 15.8927 50.5183 15.3066C49.9322 14.7206 49.1374 14.3914 48.3086 14.3914H13.3086Z"
      fill="white"
    />
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M13.9336 22.5164C13.9336 21.4808 14.7731 20.6414 15.8086 20.6414H45.8086C46.8441 20.6414 47.6836 21.4808 47.6836 22.5164C47.6836 23.5519 46.8441 24.3914 45.8086 24.3914H15.8086C14.7731 24.3914 13.9336 23.5519 13.9336 22.5164Z"
      fill="white"
    />
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M13.9336 30.0164C13.9336 28.9808 14.7731 28.1414 15.8086 28.1414H23.3086C24.3441 28.1414 25.1836 28.9808 25.1836 30.0164C25.1836 31.0519 24.3441 31.8914 23.3086 31.8914H15.8086C14.7731 31.8914 13.9336 31.0519 13.9336 30.0164Z"
      fill="white"
    />
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M13.9336 37.5164C13.9336 36.4808 14.7731 35.6414 15.8086 35.6414H20.8086C21.8441 35.6414 22.6836 36.4808 22.6836 37.5164C22.6836 38.5519 21.8441 39.3914 20.8086 39.3914H15.8086C14.7731 39.3914 13.9336 38.5519 13.9336 37.5164Z"
      fill="white"
    />
  </svg>
);

const renderBinaryIcon = () => (
  <svg
    className="WhyJoin_binary-icon"
    viewBox="0 0 61 61"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M47.8995 8.54545C52.2185 12.7135 53.7228 18.9849 54.1826 22.7951C54.2724 23.5389 53.7422 24.2145 52.9985 24.3043C52.2547 24.3941 51.5791 23.8639 51.4893 23.1202C51.0525 19.5003 49.6509 14.0058 46.0156 10.4975C44.2315 8.77568 41.8879 7.50905 38.7636 7.17291C35.6158 6.83424 31.5903 7.43207 26.4625 9.60267C25.7726 9.89468 24.9766 9.57216 24.6846 8.88229C24.3926 8.19242 24.7151 7.39645 25.405 7.10443C30.8224 4.81127 35.3203 4.07396 39.0538 4.47565C42.8108 4.87986 45.7065 6.42907 47.8995 8.54545Z"
      fill="white"
    />
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M6.50877 29.6417C7.54327 31.0837 9.04015 31.8047 10.9994 31.8047C12.9587 31.8047 14.4556 31.0759 15.4901 29.6182C16.5246 28.1605 17.0418 26.0523 17.0418 23.2936C17.0418 20.535 16.5246 18.4347 15.4901 16.9926C14.4556 15.5349 12.9587 14.8061 10.9994 14.8061C9.04015 14.8061 7.54327 15.5349 6.50877 16.9926C5.47428 18.4347 4.95703 20.535 4.95703 23.2936C4.95703 26.068 5.47428 28.184 6.50877 29.6417ZM13.327 27.9724C12.8411 28.9442 12.0653 29.4301 10.9994 29.4301C9.93357 29.4301 9.1577 28.9442 8.6718 27.9724C8.18591 26.9849 7.94296 25.4253 7.94296 23.2936C7.94296 21.162 8.18591 19.6102 8.6718 18.6384C9.1577 17.6666 9.93357 17.1807 10.9994 17.1807C12.0653 17.1807 12.8411 17.6666 13.327 18.6384C13.8129 19.5945 14.0559 21.1463 14.0559 23.2936C14.0559 25.4253 13.8129 26.9849 13.327 27.9724Z"
      fill="white"
    />
    <path
      d="M31.2334 30.347C31.2334 29.5476 30.7632 29.1479 29.8227 29.1479H27.354V16.4049C27.354 15.9346 27.2208 15.5663 26.9543 15.2998C26.6879 15.0334 26.3352 14.9001 25.8963 14.9001C25.4731 14.9001 25.0264 15.0412 24.5562 15.3233L20.912 17.5804C20.5044 17.8312 20.3007 18.1839 20.3007 18.6384C20.3007 18.9833 20.4104 19.2967 20.6298 19.5789C20.8649 19.861 21.1471 20.0021 21.4762 20.0021C21.6486 20.0021 21.8446 19.9394 22.064 19.814L24.3211 18.4268V29.1479H21.8759C20.9198 29.1479 20.4417 29.5476 20.4417 30.347C20.4417 31.1777 20.9198 31.5931 21.8759 31.5931H29.8227C30.7632 31.5931 31.2334 31.1777 31.2334 30.347Z"
      fill="white"
    />
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M46.2142 27.283C45.9421 26.6707 45.3349 26.2761 44.6649 26.2761C43.9948 26.2761 43.3876 26.6707 43.1155 27.283L34.0727 47.6293C33.6924 48.485 34.0778 49.487 34.9335 49.8673C35.7892 50.2476 36.7912 49.8622 37.1715 49.0065L38.7335 45.492H50.5963L52.1583 49.0065C52.5386 49.8622 53.5406 50.2476 54.3963 49.8673C55.252 49.487 55.6373 48.485 55.257 47.6293L46.2142 27.283ZM49.0891 42.101H40.2406L44.6649 32.1464L49.0891 42.101Z"
      fill="white"
    />
    <path
      d="M7.37329 38.1469C7.83309 41.9569 9.18827 47.6456 13.4606 51.5169C17.8335 55.4793 24.8879 57.2225 36.0117 53.8877C36.7293 53.6726 37.1366 52.9165 36.9215 52.1989C36.7064 51.4814 35.9503 51.074 35.2327 51.2892C24.6607 54.4585 18.7123 52.6148 15.2822 49.5066C11.7515 46.3074 10.5035 41.442 10.0666 37.8218C9.97682 37.0781 9.30115 36.5479 8.55742 36.6377C7.81369 36.7275 7.28353 37.4031 7.37329 38.1469Z"
      fill="white"
    />
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M25.143 6.4833C30.6328 4.15951 35.2488 3.38732 39.1288 3.80476C43.044 4.22599 46.0777 5.84587 48.3729 8.06086C52.8628 12.3939 54.3928 18.8595 54.8584 22.7173C54.993 23.8329 54.1978 24.8464 53.0822 24.9811C51.9666 25.1157 50.9531 24.3205 50.8184 23.2049C50.3873 19.6326 49.0115 14.3323 45.5471 10.9889C43.8652 9.36579 41.6597 8.16978 38.6935 7.85066C35.6921 7.52774 31.7847 8.09071 26.7292 10.2307C25.6944 10.6687 24.5005 10.1849 24.0625 9.15009C23.6244 8.11529 24.1082 6.92132 25.143 6.4833ZM38.9837 5.15339C35.3966 4.76746 31.0168 5.46989 25.6718 7.73242C25.3268 7.87843 25.1656 8.27641 25.3116 8.62135C25.4576 8.96628 25.8556 9.12755 26.2005 8.98154C31.4008 6.78029 35.5444 6.1476 38.8386 6.50202C42.121 6.85518 44.6027 8.19243 46.489 10.0129C50.2953 13.6862 51.7225 19.3749 52.1651 23.0423C52.2099 23.4142 52.5478 23.6793 52.9197 23.6344C53.2915 23.5895 53.5566 23.2517 53.5117 22.8798C53.0576 19.1172 51.579 13.04 47.431 9.03689C45.3402 7.01913 42.5825 5.54058 38.9837 5.15339ZM11.0018 15.4877C9.23768 15.4877 7.95796 16.1293 7.06428 17.3886L7.06228 17.3914C6.14483 18.6703 5.63767 20.6069 5.63767 23.2971C5.63767 26.0021 6.14452 27.9557 7.06327 29.2512C7.95567 30.4943 9.23535 31.1299 11.0018 31.1299C12.766 31.1299 14.0457 30.4884 14.9394 29.2291C15.8592 27.9331 16.366 25.9864 16.366 23.2971C16.366 20.6069 15.8589 18.6703 14.9414 17.3914L14.9394 17.3886C14.0457 16.1293 12.766 15.4877 11.0018 15.4877ZM5.95912 16.6021C7.1344 14.947 8.84808 14.1313 11.0018 14.1313C13.1556 14.1313 14.8693 14.947 16.0446 16.6022C17.1954 18.2073 17.7224 20.4708 17.7224 23.2971C17.7224 26.125 17.1948 28.3947 16.0456 30.0141C14.8703 31.6702 13.1562 32.4863 11.0018 32.4863C8.85045 32.4863 7.13667 31.6805 5.96013 30.0404L5.95811 30.0376C4.80852 28.4177 4.28125 26.1397 4.28125 23.2971C4.28125 20.4707 4.80828 18.2072 5.95912 16.6021ZM24.9115 15.906L21.2715 18.1604L21.2698 18.1615C21.0501 18.2967 20.9813 18.4375 20.9813 18.6419C20.9813 18.8266 21.0351 18.992 21.1605 19.1567C21.2803 19.2971 21.3777 19.3273 21.4787 19.3273C21.4904 19.3273 21.5657 19.3211 21.7213 19.2335L25.0017 17.2174V29.8296H21.8784C21.4782 29.8296 21.3044 29.9157 21.2377 29.9715C21.1944 30.0077 21.1224 30.0904 21.1224 30.3504C21.1224 30.6345 21.1997 30.7315 21.2475 30.7731C21.3136 30.8305 21.4833 30.9183 21.8784 30.9183H29.8251C30.2101 30.9183 30.3721 30.8315 30.4341 30.7767C30.4801 30.7361 30.5576 30.6379 30.5576 30.3504C30.5576 30.0867 30.4852 30.003 30.4439 29.9679C30.3815 29.9148 30.2153 29.8296 29.8251 29.8296H26.6783V16.4083C26.6783 16.0708 26.5866 15.8923 26.4772 15.7828C26.3589 15.6645 26.1898 15.5818 25.8988 15.5818C25.6307 15.5818 25.3051 15.6705 24.9115 15.906ZM24.2097 14.7452C24.7548 14.4182 25.3213 14.2254 25.8988 14.2254C26.4855 14.2254 27.0217 14.4091 27.4363 14.8237C27.8598 15.2472 28.0347 15.8053 28.0347 16.4083V28.4732H29.8251C30.3754 28.4732 30.9146 28.5878 31.3224 28.9344C31.7513 29.299 31.914 29.8148 31.914 30.3504C31.914 30.8937 31.7564 31.4186 31.3321 31.7933C30.9239 32.1539 30.3806 32.2747 29.8251 32.2747H21.8784C21.3173 32.2747 20.7699 32.1549 20.3579 31.797C19.9277 31.4232 19.766 30.8971 19.766 30.3504C19.766 29.8111 19.933 29.2943 20.3677 28.9308C20.7791 28.5868 21.3224 28.4732 21.8784 28.4732H23.6453V19.6431L22.4123 20.4009L22.4029 20.4063C22.1256 20.5648 21.8116 20.6837 21.4787 20.6837C20.9233 20.6837 20.4584 20.4331 20.1112 20.0165L20.1039 20.0077L20.0969 19.9987C19.7885 19.6022 19.6249 19.1433 19.6249 18.6419C19.6249 17.9374 19.9634 17.3731 20.5582 17.0067C20.5584 17.0066 20.5587 17.0064 20.5589 17.0062L24.2097 14.7452ZM9.26059 16.9738C9.77315 16.6528 10.3629 16.506 11.0018 16.506C11.6408 16.506 12.2305 16.6528 12.7431 16.9738C13.2543 17.294 13.647 17.7612 13.9351 18.3366C14.4966 19.443 14.7365 21.1307 14.7365 23.2971C14.7365 25.4529 14.4952 27.1428 13.938 28.2752L13.9361 28.2791C13.6479 28.8554 13.2549 29.3234 12.7431 29.6439C12.2305 29.9649 11.6408 30.1117 11.0018 30.1117C10.3629 30.1117 9.77315 29.9649 9.26059 29.6439C8.74878 29.3234 8.35578 28.8554 8.06762 28.2791L8.06569 28.2753C7.50844 27.1428 7.26717 25.4529 7.26717 23.2971C7.26717 21.1427 7.50802 19.4577 8.06762 18.3386C8.35578 17.7622 8.74878 17.2943 9.26059 16.9738ZM9.98053 18.1234C9.71646 18.2888 9.47858 18.5497 9.28084 18.9452C8.86864 19.7696 8.62359 21.1881 8.62359 23.2971C8.62359 25.403 8.86784 26.8317 9.2818 27.6744C9.47935 28.0688 9.71689 28.3292 9.98053 28.4943C10.2438 28.6592 10.575 28.7553 11.0018 28.7553C11.4287 28.7553 11.7598 28.6592 12.0232 28.4943C12.2868 28.3292 12.5243 28.0688 12.7219 27.6744C13.1358 26.8317 13.3801 25.403 13.3801 23.2971C13.3801 21.17 13.1344 19.755 12.7248 18.9491L12.7228 18.9452C12.5251 18.5497 12.2872 18.2888 12.0232 18.1234C11.7598 17.9585 11.4287 17.8624 11.0018 17.8624C10.575 17.8624 10.2438 17.9585 9.98053 18.1234ZM44.6673 26.9578C44.2653 26.9578 43.9009 27.1945 43.7377 27.5619L34.6949 47.9082C34.4667 48.4216 34.6979 49.0228 35.2113 49.251C35.7248 49.4792 36.326 49.2479 36.5541 48.7345L38.2951 44.8173H51.0394L52.7804 48.7345C53.0086 49.2479 53.6098 49.4792 54.1232 49.251C54.6367 49.0228 54.8679 48.4216 54.6397 47.9082L45.5969 27.5619C45.4336 27.1945 45.0693 26.9578 44.6673 26.9578ZM42.4981 27.011C42.8791 26.1538 43.7292 25.6014 44.6673 25.6014C45.6054 25.6014 46.4554 26.1538 46.8364 27.011L55.8792 47.3573C56.4116 48.5553 55.8721 49.958 54.6741 50.4905C53.4761 51.0229 52.0734 50.4834 51.5409 49.2854L50.1579 46.1737H39.1766L37.7937 49.2854C37.4806 49.9897 36.8667 50.4665 36.1705 50.6316C36.8202 50.8131 37.3655 51.3136 37.5735 52.0076C37.8962 53.084 37.2853 54.2181 36.2089 54.5408C24.9476 57.9168 17.6166 56.1992 13.0076 52.0229C8.54987 47.9836 7.16792 42.089 6.70239 38.2316C6.56776 37.116 7.36299 36.1024 8.47858 35.9678C9.59418 35.8332 10.6077 36.6284 10.7423 37.744C11.1735 41.3166 12.3948 45.9762 15.74 49.0075C18.9348 51.9024 24.607 53.7708 35.0403 50.643C35.0531 50.6391 35.0658 50.6354 35.0786 50.6319C34.9376 50.5984 34.7977 50.5515 34.6605 50.4905C33.4625 49.958 32.9229 48.5553 33.4554 47.3573L42.4981 27.011ZM44.6673 30.4799L50.1352 42.7826H39.1994L44.6673 30.4799ZM41.2866 41.4262H48.048L44.6673 33.8197L41.2866 41.4262ZM9.39568 37.9065C9.3508 37.5347 9.01297 37.2696 8.6411 37.3145C8.26924 37.3593 8.00416 37.6972 8.04904 38.069C8.50311 41.8316 9.83152 47.3145 13.9184 51.0178C18.0553 54.7663 24.833 56.5351 35.8194 53.2415C36.1782 53.134 36.3818 52.7559 36.2743 52.3971C36.1667 52.0383 35.7887 51.8347 35.4299 51.9422C24.7193 55.1532 18.4947 53.334 14.8292 50.0126C11.1132 46.6454 9.8383 41.5742 9.39568 37.9065Z"
      fill="white"
    />
  </svg>
);


const WhyJoin = ({ data, renderActionButton, ...props }) => {
  return (
    <div className="WhyJoin_Base">
      <div className="WhyJoin_why-join-container">
        <div className="WhyJoin_why-join-title">
          {get(props, 'isEventDataFetching', false) ? <DescriptionsSkeleton forSection='eventDetails-joinReason' /> : `Why you should join the ${get(data, "name")} ?`}
        </div>
        <div className="WhyJoin_row">
          {get(props, 'isEventDataFetching', false) && (
            Array(3).fill().map((_, i) => (
              <DescriptionsSkeleton forSection='eventDetails-joinReasonBox' />
            ))
          )}
          {!get(props, 'isEventDataFetching', false) && get(data, "eventJoinReasons", []).length > 0 &&
            get(data, "eventJoinReasons").map((i, idx) => {
              return (
                <div className="WhyJoin_why-join-card">
                  <div className="WhyJoin-overlay"></div>
                  <div>
                    <img
                      className="WhyJoin_gift-icon"
                      src={getPath(get(i, "picture.uri"))}
                      alt="eventJoinReason"
                    />
                  </div>
                  <div className="WhyJoin_join-desc">{get(i, "title").length<100 ? get(i, "title").slice(0, 100) : `${get(i, "title").slice(0, 100)}...`}</div>
                </div>
              );
            })}
        </div>
        <div
          className="WhyJoin_row WhyJoin_last-register"
          style={{ width: "100%", justifyContent: "center" }}
        >
          {renderActionButton()}
        </div>
      </div>
    </div>
  );
};

export default WhyJoin;
